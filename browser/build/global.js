var An=Object.defineProperty;var ut=(e,t)=>{for(var n in t)An(e,n,{get:t[n],enumerable:!0,configurable:!0,set:(i)=>t[n]=()=>i})};var $n=globalThis.fetch,ht=$n;console.error("wwws does not support the browser.");var mt=null;var fe={},Gn=typeof window<"u"&&typeof HTMLElement<"u",Wn=typeof WebSocketPair<"u"&&typeof Cloudflare<"u",Ln=typeof process<"u"&&process.moduleLoadList?.length>0,_n=typeof Deno<"u",Kn=typeof Bun<"u";if(!Gn&&!Wn&&!Ln&&!_n&&!Kn)throw Error("yolkbot doesn't know how to run in this environment. Please open an issue on GitHub with information on where you run yolkbot.");fe.fetch=typeof process>"u"?globalThis.fetch:ht;fe.WebSocket=typeof process>"u"?globalThis.WebSocket:mt;var z=fe;var Re={};ut(Re,{findItemById:()=>P,UserAgent:()=>te,Team:()=>qn,StateBufferSize:()=>ee,SocialReward:()=>Bn,SocialMedia:()=>Oe,ShellStreak:()=>x,PlayType:()=>oe,Movement:()=>O,ItemType:()=>$,GunList:()=>C,GunEquipTime:()=>Ne,GameOptionFlag:()=>ve,GameMode:()=>I,GameAction:()=>Z,FramesBetweenSyncs:()=>H,FirebaseKey:()=>D,CoopState:()=>b,CollectType:()=>ae,ChiknWinnerDailyLimit:()=>Te,ChatFlag:()=>Cn,ChallengeType:()=>Hn,ChallengeSubType:()=>Dn,BanDuration:()=>Ue});var Se={};ut(Se,{SMG:()=>xe,RPEGG:()=>Pe,M24:()=>Ie,EggK47:()=>de,DozenGauge:()=>ge,Cluck9mm:()=>ye,CSG1:()=>ke,AUG:()=>we});var de={ammo:{capacity:30,reload:30,store:240,pickup:30},longReloadTime:205,shortReloadTime:160,weaponName:"EggK-47",internalName:"Eggk47",damage:30,range:20,rof:3,totalDamage:30,velocity:1.5},ge={ammo:{capacity:2,reload:2,store:24,pickup:8},longReloadTime:155,shortReloadTime:155,weaponName:"Scrambler",internalName:"Dozen Gauge",damage:8.5,range:8,rof:8,totalDamage:170,velocity:1},ke={ammo:{capacity:15,reload:15,store:60,pickup:15},longReloadTime:225,shortReloadTime:165,weaponName:"Free Ranger",internalName:"CSG-1",damage:105,range:50,rof:13,totalDamage:105,velocity:1.75},ye={ammo:{capacity:15,reload:15,store:60,pickup:15},longReloadTime:195,shortReloadTime:160,weaponName:"Cluck 9mm",internalName:"Cluck 9mm",damage:26,range:15,rof:4,totalDamage:26,velocity:1},Pe={ammo:{capacity:1,reload:1,store:3,pickup:1},longReloadTime:170,shortReloadTime:170,weaponName:"RPEGG",internalName:"Eggsploder",damage:140,range:45,rof:40,totalDamage:192.5,velocity:0.4},xe={ammo:{capacity:40,reload:40,store:200,pickup:40},longReloadTime:225,shortReloadTime:190,weaponName:"Whipper",internalName:"SMEGG",damage:23,range:20,rof:2,totalDamage:23,velocity:1.25},Ie={ammo:{capacity:1,reload:1,store:12,pickup:4},longReloadTime:144,shortReloadTime:144,weaponName:"Crackshot",internalName:"M2DZ",damage:170,range:60,rof:15,totalDamage:170,velocity:2},we={ammo:{capacity:24,reload:24,store:150,pickup:24},longReloadTime:205,shortReloadTime:160,weaponName:"Tri-Hard",internalName:"AUG",damage:32,range:20,rof:15,totalDamage:34,velocity:1.5};var P=()=>null;var Ue={FiveMinutes:0,FifteenMinutes:1,OneHour:2},Dn={Killstreak:0,KillWithWeapon:1,MovementDistance:3,Jumping:4,TimePlayed:6,TimeAlive:7,KillWithCondition:8,TotalKills:10,SpatulaKills:10,Collecting:18,FromTheCoop:20,SpecialOffensive:21,WinKOTC:23,KillWithSpatula:23},Hn={Kill:0,Damage:1,Death:2,Movement:3,Collect:4,Time:5,KOTC:6,Spatula:7},Cn={None:0,Pinned:2,Team:4,Mod:254,Server:255},Te=3,ae={Ammo:0,Grenade:1},b={Start:0,Score:1,Win:2,Capturing:3,Contested:4,Takeover:5,Abandoned:6,Unclaimed:7},D="AIzaSyDP4SIjKaw6A4c-zvfYxICpbEjn1rRnN50",H=3,Z={Reset:1,Pause:2},I={FFA:0,Team:1,Spatula:2,KOTC:3},ve={Locked:1,NoTeamChange:2,NoTeamShuffle:4},Ne=13,C=[de,ge,ke,Pe,xe,Ie,we],$={Hat:1,Stamp:2,Primary:3,Secondary:4,Grenade:6,Melee:7},O={Forward:1,Backward:2,Left:4,Right:8,Jump:16,Fire:32,Melee:64,Scope:128},oe={JoinPublic:0,CreatePrivate:1,JoinPrivate:2},x={HardBoiled:1,EggBreaker:2,Restock:4,OverHeal:8,DoubleEggs:16,MiniEgg:32},Oe={Facebook:0,Instagram:1,Tiktok:2,Discord:3,Youtube:4,Twitter:5,Twitch:6},Bn={Discord:"rew_1200",Tiktok:"rew_1208",Instagram:"rew_1219",Steam:"rew_1223",Facebook:"rew_1227",Twitter:"rew_1234",Twitch:"rew_twitch_social"},ee=256,qn={Blue:1,Red:2},te="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36";class lt{connected=!1;autoReconnect=!1;url="";proxy="";binaryType="";maxRetries=5;connectionTimeout=5000;onopen=()=>{};onmessage=()=>{};onclose=()=>{};onerror=()=>{};constructor(e,t){if(typeof process>"u"&&t)throw Error("You cannot pass a proxy to a WebSocket in this environment.");this.url=e,this.proxy=t}async tryConnect(e=1){let t=new URL(this.url),n=async()=>{if(e===5)return!1;return await this.tryConnect(e+1)};try{if(this.socket=typeof process>"u"?new z.WebSocket(this.url):new z.WebSocket(this.url,{proxy:this.proxy||null,headers:{"accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-US,en;q=0.9","cache-control":"no-cache",connection:"Upgrade",origin:t.origin.replace("ws","http"),pragma:"no-cache","user-agent":te}}),this.binaryType)this.socket.binaryType=this.binaryType}catch(i){return console.error(`Failed to connect on try ${e}, trying again...`,i),await n()}if(this.onBeforeConnect)this.onBeforeConnect();return new Promise((i)=>{let r=setTimeout(async()=>{this.socket.close(),i(await n())},this.connectionTimeout),a=async(o)=>{clearTimeout(r),console.error("WebSocket error",o),i(await n())};this.socket.addEventListener("open",async()=>{clearTimeout(r),this.connected=!0,this.socket.removeEventListener("error",a),this.socket.addEventListener("open",(...o)=>this.onopen(...o)),this.socket.addEventListener("message",(...o)=>this.onmessage(...o)),this.socket.addEventListener("close",(...o)=>this.onclose(...o)),this.socket.addEventListener("error",(...o)=>this.onerror(...o)),i(!0)}),this.socket.addEventListener("error",a),this.socket.addEventListener("close",()=>{if(this.connected){if(this.connected=!1,this.autoReconnect)setTimeout(async()=>{if(!await this.tryConnect()){if(this.onclose)this.onclose();console.error("tryConnect: failed to reconnect to",this.url,"after 5 attempts."),console.error("tryConnect: please check your internet connection & ensure your IP isn't blocked.")}},250)}})})}send(e){return this.socket?.send(e)}close(e){return this.autoReconnect=!1,this.socket?.close(e)}}var ne=lt;var w={WebSocketConnectFail:"websocket_connect_fail",MissingParams:"missing_params",NetworkFail:"firebase_network_failed",ServicesClosedEarly:"services_closed_early",InternalError:"unknown_error"},Fe={...w,AccountBanned:"account_banned"},Ee={SessionExpired:"PLAYER_NOT_FOUND",ItemNotFound:"ITEM_NOT_FOUND",ItemAlreadyOwned:"ALREADY_OWNED",CannotAfford:"INSUFFICIENT_FUNDS",InternalError:"UNKNOWN_ERROR"},G={OnCooldown:"on_cooldown",HitDailyLimit:"hit_daily_limit",NotAtDailyLimit:"not_at_limit",NotEnoughResetEggs:"not_enough_eggs",SessionExpired:"session_expired",InternalError:"unknown_error"},U={MissingParams:"missing_params",InvalidRegion:"region_not_in_list",InvalidMode:"mode_not_in_list",InvalidMap:"map_not_in_list",GameNotFound:"game_not_found",SessionExpired:"session_expired",InternalError:"unknown_error"},Y={MissingParams:"missing_params",InvalidObject:"invalid_game_object",WebSocketConnectFail:"websocket_connect_fail",InternalError:"unknown_error"},ft={WebSocketConnectFail:"websocket_connect_fail"},h={CHALLENGES:1,BOT_STATS:2,PATHFINDING:3,PING:5,COSMETIC_DATA:6,PLAYER_HEALTH:7,PACKET_HOOK:8,LOG_PACKETS:10,NO_LOGIN:11,DEBUG_BUFFER:12,NO_AFK_KICK:16,LOAD_MAP:17,OBSERVE_GAME:18,NO_REGION_CHECK:19,NO_EXIT_ON_ERROR:20,RENEW_SESSION:21,VIP_HIDE_BADGE:22},Me={SessionExpired:"PLAYER_NOT_FOUND",CurrentlyRedeemingElsewhere:"CODE_DOUBLE_DOUBLE",AlreadyRedeemed:"CODE_PREV_REDEEMED",InvalidCode:"CODE_NOT_FOUND",Ratelimited:"RATE_LIMIT_REACHED",InternalError:"UNKNOWN_ERROR"},ze={SessionExpired:"reward_expired_session",InvalidReward:"REWARD_NOT_FOUND",AlreadyRedeemed:"REWARD_PREV_GIVEN",InternalError:"unknown_error"},Ae={SessionExpired:"urlRewardParams_expired_session",InvalidReward:"REWARD_NOT_FOUND",AlreadyRedeemed:"REWARD_PREV_GIVEN",InternalError:"unknown_error"},$e={SessionExpired:"challengeRerollSlot_expired_session",ChallengeNotFound:"challenge_not_found",ChallengeNotAssigned:"challenge_reroll_not_found",InternalError:"unknown_error"},Ge={SessionExpired:"challengeClaimReward_expired_session",ChallengeNotFound:"challenge_claim_not_found",ChallengeNotCompleted:"challenge_not_completed",InternalError:"unknown_error"},R={NoPathFound:"no_path_found",PathTooShort:"path_too_short"};var B=(e)=>{let t=structuredClone(e);return t.ammo.rounds=t.ammo.capacity,t.ammo.storeMax=t.ammo.store,t},l=(e)=>({ok:!1,error:e}),dt=async(e,t)=>{if(typeof process<"u"){let{existsSync:i,mkdirSync:r,readFileSync:a,writeFileSync:o}=process.getBuiltinModule("node:fs"),{join:c}=process.getBuiltinModule("node:path"),{homedir:u}=process.getBuiltinModule("node:os"),m=c(u(),".yolkbot");if(!i(m))r(m);let k=c(m,"maps");if(!i(k))r(k);let d=c(k,`${e}-${t}.json`);if(i(d))return JSON.parse(a(d,"utf-8"));let y=await(await fetch(`https://esm.sh/gh/yolkorg/maps/maps/${e}.json?${t}`)).json();return o(d,JSON.stringify(y,null,4),{flag:"w+"}),y}return await(await fetch(`https://esm.sh/gh/yolkorg/maps/maps/${e}.json?${t}`)).json()},gt=(e)=>{let t=e.length;if(!t)return[];let n=1/0,i=1/0,r=1/0,a=-1/0,o=-1/0,c=-1/0;for(let f=0;f<t;f++){let{x:v,y:E,z:L}=e[f];if(v<n)n=v;if(v>a)a=v;if(E<i)i=E;if(E>o)o=E;if(L<r)r=L;if(L>c)c=L}let u=a-n+1|0,m=o-i+1|0,k=c-r+1|0,d=u,y=u*m,F=new Int32Array(u*m*k).fill(-1),S=new Uint16Array(t),T=new Uint32Array(t);for(let f=0;f<t;f++){let{x:v,y:E,z:L}=e[f];F[(v-n|0)+(E-i|0)*d+(L-r|0)*y]=f}let W=[],A=0,K=[-1,d,-d,y,-y];K[0]=-1,K[1]=1,K[2]=-y,K[3]=y;for(let f=0;f<t;f++){if(S[f])continue;let v=++A,E=[],L=0,q=0;T[q++]=f,S[f]=v;while(L<q){let Mn=T[L++],he=e[Mn];he.zone=v,E[E.length]=he;let{x:me,y:zn,z:le}=he,re=(me-n|0)+(zn-i|0)*d+(le-r|0)*y,N;if(me>n&&(N=F[re-1])!==-1&&!S[N])S[N]=v,T[q++]=N;if(me<a&&(N=F[re+1])!==-1&&!S[N])S[N]=v,T[q++]=N;if(le>r&&(N=F[re-y])!==-1&&!S[N])S[N]=v,T[q++]=N;if(le<c&&(N=F[re+y])!==-1&&!S[N])S[N]=v,T[q++]=N}W[W.length]=E}return W};var ie={origin:"https://shellshock.io","user-agent":typeof process>"u"?null:te,"x-client-version":"Chrome/JsCore/9.17.2/FirebaseCore-web","x-firebase-locale":"en"};class ce{constructor(e={}){this.proxy=e.proxy,this.instance=e.instance||"shellshock.io",this.protocol=e.protocol||"wss",this.connectionTimeout=e.connectionTimeout||5000}queryServices=async(e)=>{let t=new ne(`${this.protocol}://${this.instance}/services/`,this.proxy);if(t.connectionTimeout=this.connectionTimeout,!await t.tryConnect()||t.socket.readyState!==1)return l(w.WebSocketConnectFail);return new Promise((i)=>{let r=!1;t.onmessage=(a)=>{r=!0;try{let o=JSON.parse(a.data);i({ok:!0,...o})}catch(o){console.error("queryServices: error! command:",e.cmd,"and data:",e,o),i(l(w.InternalError))}t.close()},t.onerror=()=>!r&&i(l(w.InternalError)),t.onclose=()=>{if(r)return;console.log("queryServices: services closed before sending back message"),console.log("queryServices: command:",e.cmd,"and data:",e),i(l(w.ServicesClosedEarly))},t.send(JSON.stringify(e))})};#e=async(e,t,n)=>{if(!e||!t)return l(w.MissingParams);let i;try{i=await(await z.fetch(`https://identitytoolkit.googleapis.com/v1/accounts:${n}?key=${D}`,{method:"POST",body:JSON.stringify({email:e,password:t,returnSecureToken:!0}),headers:{...ie,"content-type":"application/json"},proxy:this.proxy})).json()}catch(a){if(a.code==="auth/network-request-failed")return console.error("authWithEmailPass: network error",i||a),l(w.NetworkFail);else if(a.code==="ERR_BAD_REQUEST")return console.error("authWithEmailPass: bad request",i||a),l(w.InternalError);return console.error("authWithEmailPass: unknown error:",e,t,a),l(w.InternalError)}if(!i.idToken)return console.error("authWithEmailPass: missing idToken",i),l(w.InternalError);this.idToken=i.idToken;let r=await this.queryServices({cmd:"auth",firebaseToken:i.idToken});return r.ok?{firebase:i,...r}:r};createAccount=(e,t)=>this.#e(e,t,"signUp");loginWithCredentials=(e,t)=>this.#e(e,t,"signInWithPassword");loginWithRefreshToken=async(e)=>{if(!e)return l(w.MissingParams);let t=new URLSearchParams;t.append("grant_type","refresh_token"),t.append("refresh_token",e);let n;try{n=await(await z.fetch(`https://securetoken.googleapis.com/v1/token?key=${D}`,{method:"POST",body:t,headers:{...ie,"content-type":"application/x-www-form-urlencoded"},proxy:this.proxy})).json()}catch(r){if(r.code==="auth/network-request-failed")return console.error("loginWithRefreshToken: network error",n||r),l(w.NetworkFail);return console.error("loginWithRefreshToken: unknown error:",n,r),l(w.InternalError)}if(!n.id_token)return console.error("loginWithRefreshToken: missing idToken",n),l(w.InternalError);this.idToken=n.id_token;let i=await this.queryServices({cmd:"auth",firebaseToken:n.id_token});return i.ok?{firebase:n,...i}:i};loginAnonymously=async()=>{let t=await(await z.fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${D}`,{method:"POST",body:JSON.stringify({returnSecureToken:!0}),headers:{...ie,"content-type":"application/json"},proxy:this.proxy})).json();if(!t.idToken)return console.error("loginAnonymously: missing idToken",t),l(w.InternalError);this.idToken=t.idToken;let n=await this.queryServices({cmd:"auth",firebaseToken:t.idToken});return n.ok?{firebase:t,...n}:n};sendEmailVerification=async(e=this.idToken)=>{if(!e)return l(w.MissingParams);let n=await(await z.fetch(`https://identitytoolkit.googleapis.com/v1/accounts:sendOobCode?key=${D}`,{method:"POST",body:JSON.stringify({requestType:"VERIFY_EMAIL",idToken:e}),headers:{...ie,"content-type":"application/json"},proxy:this.proxy})).json();if(n.kind!=="identitytoolkit#GetOobConfirmationCodeResponse")return console.error("sendEmailVerification: the game sent an invalid response",n),l(w.InternalError);return{ok:!0,email:n.email}};verifyOobCode=async(e)=>{if(!e)return l(w.MissingParams);let n=await(await z.fetch(`https://www.googleapis.com/identitytoolkit/v3/relyingparty/setAccountInfo?key=${D}`,{method:"POST",body:JSON.stringify({oobCode:e}),headers:{...ie,"x-client-version":"Chrome/JsCore/3.7.5/FirebaseCore-web",referer:"https://shellshockio-181719.firebaseapp.com/","content-type":"application/json"},proxy:this.proxy})).json();if(!n.emailVerified)return console.error("verifyOobCode: the game sent an invalid response",n),l(w.InternalError);return{ok:!0,email:n.email}}}var kt=ce;class yt{static buffer;static idx;static init(e){this.buffer=new Uint8Array(e),this.idx=0}static isMoreDataAvailable(){return this.buffer.length-this.idx}static unPackInt8U(){return this.buffer[this.idx++]}static unPackInt8(){return this.unPackInt8U()<<24>>24}static unPackInt16U(){let e=this.idx;return this.idx+=2,this.buffer[e]|this.buffer[e+1]<<8}static unPackInt24U(){let e=this.idx;return this.idx+=3,this.buffer[e]|this.buffer[e+1]<<8|this.buffer[e+2]<<16}static unPackInt32U(){let e=this.idx;return this.idx+=4,(this.buffer[e]|this.buffer[e+1]<<8|this.buffer[e+2]<<16|this.buffer[e+3]<<24)>>>0}static unPackInt16(){return this.unPackInt16U()<<16>>16}static unPackInt32(){return this.unPackInt32U()<<0}static unPackRadU(){return this.unPackInt24U()/2097152}static unPackRad(){return this.unPackInt16U()/8192-Math.PI}static unPackFloat(){return this.unPackInt16()/256}static unPackDouble(){return this.unPackInt32()/1048576}static unPackString(e){e=e||255;let t=Math.min(this.unPackInt8U(),e);return this.unPackStringHelper(t)}static unPackLongString(e){e=e||16383;let t=Math.min(this.unPackInt16U(),e);return this.unPackStringHelper(t)}static unPackStringHelper(e){if(this.isMoreDataAvailable()<e*2)return"";let t=[];for(let n=0;n<e;n++){let i=this.unPackInt16U();if(i>0)t.push(String.fromCodePoint(i))}return t.join("")}}var s=yt;class Pt{constructor(e=16384){this.idx=0,this.arrayBuffer=new ArrayBuffer(e),this.view=new DataView(this.arrayBuffer),this.buffer=new Uint8Array(this.arrayBuffer)}send(e){let t=new Uint8Array(this.arrayBuffer,0,this.idx);e.send(t)}packInt8(e){this.view.setInt8(this.idx,e),this.idx++}packInt16(e){this.view.setInt16(this.idx,e,!0),this.idx+=2}packInt24(e){this.view.setInt16(this.idx,e&65535,!0),this.view.setInt8(this.idx+2,e>>16&255),this.idx+=3}packInt32(e){this.view.setInt32(this.idx,e,!0),this.idx+=4}packRadU(e){this.packInt24(e*2097152)}packRad(e){this.packInt16((e+Math.PI)*8192)}packFloat(e){this.packInt16(e*256)}packDouble(e){this.packInt32(e*1048576)}packString(e){if(typeof e!=="string")e="";this.packInt8(e.length);for(let t=0;t<e.length;t++)this.packInt16(e.charCodeAt(t))}packLongString(e){if(typeof e!=="string")e="";this.packInt16(e.length);for(let t=0;t<e.length;t++)this.packInt16(e.charCodeAt(t))}}var g=Pt;var Zn={gameNotFound:4000,gameFull:4001,badName:4002,mainMenu:4003,gameIdleExceeded:4004,corruptedLoginData0:4005,corruptedLoginData1:4006,corruptedLoginData2:4007,corruptedLoginData3:4008,corruptedLoginData4:4009,corruptedLoginData5:4010,gameMaxPlayersExceeded:4011,gameDestroyUser:4012,joinGameOutOfOrder:4013,gameShuttingDown:4014,readyBeforeReady:4015,booted:4016,gameErrorOnUserSocket:4017,uuidNotFound:4018,sessionNotFound:4019,clusterFullCpu:4020,clusterFullMem:4021,noClustersAvailable:4022,locked:4023},xt=Zn;var Yn={},p=Yn;var Jn=Object.fromEntries(Object.entries(Oe).map(([e,t])=>[t,e.toLowerCase()]));class pe{constructor(e,t=null){if(this.id=e.id,this.uniqueId=e.uniqueId,this.name=e.name,this.safeName=e.safeName,this.team=e.team,this.playing=e.playing,this.socials=e.social&&JSON.parse(e.social),this.socials)this.socials.forEach((n)=>n.type=Jn[n.id]);if(this.isVip=e.upgradeProductId>0,this.showBadge=!e.hideBadge||!1,this.streak=e.score,this.streakRewards=Object.values(x).filter((n)=>e.activeShellStreaks&n),this.scale=this.streakRewards.includes(x.MiniEgg)?0.5:1,this.position={x:e.x,y:e.y,z:e.z},this.jumping=e.$controlKeys&O.Jump,this.scoping=e.$controlKeys&O.Scope,this.climbing=!1,this.view={yaw:e.yaw,pitch:e.pitch},this.updateKotcZone(t),this.character={eggColor:e.shellColor,primaryGun:e.primaryWeaponItem,secondaryGun:e.secondaryWeaponItem,stamp:e.stampItem,hat:e.hatItem,grenade:e.grenadeItem,melee:e.meleeItem,stampPos:{x:e.stampPosX,y:e.stampPosY}},this.stats={totalKills:e.totalKills,totalDeaths:e.totalDeaths,bestStreak:e.bestStreak},this.activeGun=e.weaponIdx,this.selectedGun=e.charClass,this.weapons=[],this.character.primaryGun)this.weapons[0]=B(C[this.selectedGun]),this.weapons[1]=B(ye);this.grenades=1,this.hp=e.hp,this.hpShield=0,this.spawnShield=e.shield,this.randomSeed=0}updateKotcZone(e){if(!e)return this.inKotcZone=!1;let t=Math.floor(this.position.x),n=Math.floor(this.position.y),i=Math.floor(this.position.z);this.inKotcZone=e.some((r)=>r.x===t&&r.y===n&&r.z===i)&&this.playing}}var se=pe;var Xn=(e,t)=>(e%t+t)%t,Qn=Math.PI*2,It=(e)=>Math.round(e*8192)/8192,jn=(e)=>It(Xn(Math.atan2(-e.x,-e.z),Qn)),Vn=(e)=>It(Math.atan2(e.y,Math.hypot(e.x,e.z)));class wt{constructor(e){this.pos=e}validate(){return this.pos&&this.pos.x&&this.pos.y&&this.pos.z}check(e){return e.me.playing}execute(e){let t={x:this.pos.x-e.me.position.x,y:this.pos.y-e.me.position.y,z:this.pos.z-e.me.position.z},n=jn(t),i=Vn(t);e.state.yaw=n,e.state.pitch=i}}var J=wt;class St{constructor(e){if(typeof e==="number")this.inputKeys=e;else if(typeof e==="object")this.inputKeys=e.reduce((t,n)=>t|n,0)}validate(){if(typeof this.inputKeys!=="number")return!1;if(this.inputKeys&O.Forward&&this.inputKeys&O.Backward)return!1;if(this.inputKeys&O.Left&&this.inputKeys&O.Right)return!1;return!0}check(e){return e.me.playing}execute(e){e.state.controlKeys=this.inputKeys}}var X=St;class Ut{constructor(e,t,n=""){this.uniqueId=e,this.duration=t,this.reason=n}validate(e){if(typeof this.uniqueId!=="string"||typeof this.reason!=="string")return!1;if(typeof this.duration!=="number"||!Object.values(Ue).some((t)=>this.duration===t))return!1;if(!(e.account.adminRoles&4))return!1;return!0}check(){return!0}execute(e){let t=new g;t.packInt8(p.banPlayer),t.packString(this.uniqueId),t.packString(this.reason),t.packInt8(this.duration),t.send(e.game.socket)}}var We=Ut;class Tt{constructor(e){this.uniqueId=e}validate(e){return typeof this.uniqueId==="string"&&e.game.isGameOwner&&Object.values(e.players).find((t)=>t.uniqueId===this.uniqueId)}check(){return!0}execute(e){let t=new g;t.packInt8(p.bootPlayer),t.packString(this.uniqueId),t.send(e.game.socket)}}var Le=Tt;class vt{constructor(e){this.msg=e}validate(){if(typeof this.msg!=="string")return!1;if(this.msg.length<1||this.msg.length>64)return!1;return!0}check(e){if(!e.state?.inGame)return!1;if(!e.game.isPrivate&&!e.account.adminRoles&&e.state.chatLines>=2)return!1;if(!e.game.isPrivate&&!e.account.emailVerified&&!e.account.isAged)return!1;return!0}execute(e){e.state.chatLines++;let t=new g;t.packInt8(p.chat),t.packString(this.msg),t.send(e.game.socket)}}var _e=vt;class Nt{constructor(e){this.amount=e||1}validate(){return this.amount>=1}check(e){return e.me.playing&&!e.state.reloading&&!e.state.swappingGun&&!e.state.usingMelee&&e.me.weapons[e.me.activeGun].ammo.rounds>=this.amount}execute(e){e.state.shotsFired+=this.amount||1}}var Ke=Nt;var bn=Array.from({length:4},(e,t)=>(t+1)*0.25),ei=Array.from({length:9},(e,t)=>t*0.25),ti=Array.from({length:17},(e,t)=>t*0.25),M=(e,t)=>typeof e>"u"?t:e;class Ot{constructor(e){this.changes=e}#e(e){let t={};if(t.gravity=M(this.changes.gravity,e.game.options.gravity),t.damage=M(this.changes.damage,e.game.options.damage),t.healthRegen=M(this.changes.healthRegen,e.game.options.healthRegen),t.locked=M(this.changes.locked,e.game.options.locked),t.noTeamChange=M(this.changes.noTeamChange,e.game.options.noTeamChange),t.noTeamShuffle=M(this.changes.noTeamShuffle,e.game.options.noTeamShuffle),t.weaponsDisabled=[M(this.changes.disableEggk,e.game.options.weaponsDisabled[0]),M(this.changes.disableScrambler,e.game.options.weaponsDisabled[1]),M(this.changes.disableFreeRanger,e.game.options.weaponsDisabled[2]),M(this.changes.disableRPG,e.game.options.weaponsDisabled[3]),M(this.changes.disableWhipper,e.game.options.weaponsDisabled[4]),M(this.changes.disableCrackshot,e.game.options.weaponsDisabled[5]),M(this.changes.disableTriHard,e.game.options.weaponsDisabled[6])],this.changes.toDisable&&Array.isArray(this.changes.toDisable))this.changes.toDisable.forEach((n)=>t.weaponsDisabled[n]=!0);if(this.changes.toEnable&&Array.isArray(this.changes.toEnable))this.changes.toEnable.forEach((n)=>t.weaponsDisabled[n]=!1);if(this.changes.rawWeaponsDisabled&&Array.isArray(this.changes.rawWeaponsDisabled)&&this.changes.rawWeaponsDisabled.length===7)t.weaponsDisabled=this.changes.rawWeaponsDisabled.map((n)=>!!n);return t.mustUseSecondary=t.weaponsDisabled.every((n)=>n),t}validate(e){let t=this.#e(e);if(!bn.includes(t.gravity))return!1;if(!ei.includes(t.damage))return!1;if(!ti.includes(t.healthRegen))return!1;if(typeof t.locked!=="boolean")return!1;if(typeof t.noTeamChange!=="boolean")return!1;if(typeof t.noTeamShuffle!=="boolean")return!1;if(!Array.isArray(t.weaponsDisabled))return!1;if(t.weaponsDisabled.length!==7)return!1;if(t.weaponsDisabled.some((n)=>typeof n!=="boolean"))return!1;return!0}check(e){return e.game.isGameOwner}execute(e){e.game.options=this.#e(e),e.updateGameOptions()}}var De=Ot;class Rt{validate(e){return e.intents.includes(h.PATHFINDING)}check(e){return e.me.playing&&e.game.collectables[0].length}execute(e){let t=200,n=null;for(let a of e.game.collectables[0]){let o=a.x-e.me.position.x,c=a.y-e.me.position.y,u=a.z-e.me.position.z,m=Math.sqrt(o*o+c*c+u*u);if(m<t)t=m,n=a}let i=e.pathing.nodeList.atObject(e.me.position),r=e.pathing.nodeList.atObject(n);if(e.pathing.activePath=e.pathing.astar.path(i,r),!e.pathing.activePath)return e.$emit("pathfindError",R.NoPathFound);if(e.pathing.activePath.length<2)return e.$emit("pathfindError",R.PathTooShort);e.pathing.followingPath=!0,e.pathing.activeNode=e.pathing.activePath[1],e.pathing.activeNodeIdx=1}}var He=Rt;class Ft{validate(e){return e.intents.includes(h.PATHFINDING)}check(e){return e.me.playing&&e.game.zoneNumber&&e.game.activeZone}execute(e){let t=200,n=null;for(let a of e.game.activeZone){let o=a.x-e.me.position.x,c=a.y-e.me.position.y,u=a.z-e.me.position.z,m=Math.sqrt(o*o+c*c+u*u);if(m<t)t=m,n=a}let i=e.pathing.nodeList.atObject(e.me.position),r=e.pathing.nodeList.atObject(n);if(e.pathing.activePath=e.pathing.astar.path(i,r),!e.pathing.activePath)return e.$emit("pathfindError",R.NoPathFound);if(e.pathing.activePath.length<2)return e.$emit("pathfindError",R.PathTooShort);e.pathing.followingPath=!0,e.pathing.activeNode=e.pathing.activePath[1],e.pathing.activeNodeIdx=1}}var Ce=Ft;class Et{validate(e){return e.intents.includes(h.PATHFINDING)}check(e){return e.me.playing&&e.game.collectables[1].length}execute(e){let t=200,n=null;for(let a of e.game.collectables[1]){let o=a.x-e.me.position.x,c=a.y-e.me.position.y,u=a.z-e.me.position.z,m=Math.sqrt(o*o+c*c+u*u);if(m<t)t=m,n=a}let i=e.pathing.nodeList.atObject(e.me.position),r=e.pathing.nodeList.atObject(n);if(e.pathing.activePath=e.pathing.astar.path(i,r),!e.pathing.activePath)return e.$emit("pathfindError",R.NoPathFound);if(e.pathing.activePath.length<2)return e.$emit("pathfindError",R.PathTooShort);e.pathing.followingPath=!0,e.pathing.activeNode=e.pathing.activePath[1],e.pathing.activeNodeIdx=1}}var Be=Et;class Mt{idOrName;constructor(e){this.idOrName=e}validate(e){if(!e.intents.includes(h.PATHFINDING))return!1;if(!this.idOrName)return!1;return!!(e.players[this.idOrName.toString()]||e.players.find((n)=>n.name===this.idOrName))}check(e){if(!e.me.playing)return!1;let t=e.players[this.idOrName.toString()]||e.players.find((n)=>n.name===this.idOrName);return t&&t.playing&&t.position&&t.position.x}execute(e){let t=e.players[this.idOrName.toString()]||e.players.find((r)=>r.name===this.idOrName),n=e.pathing.nodeList.atObject(e.me.position),i=e.pathing.nodeList.atObject(t.position);if(e.pathing.activePath=e.pathing.astar.path(n,i),!e.pathing.activePath)return e.$emit("pathfindError",R.NoPathFound);if(e.pathing.activePath.length<2)return e.$emit("pathfindError",R.PathTooShort);e.pathing.followingPath=!0,e.pathing.activeNode=e.pathing.activePath[1],e.pathing.activeNodeIdx=1}}var qe=Mt;class zt{validate(e){return e.intents.includes(h.PATHFINDING)}check(e){return e.me.playing&&e.game.spatula&&e.game.spatula.coords&&e.game.spatula.coords.x}execute(e){let t=e.pathing.nodeList.atObject(e.me.position),n=e.pathing.nodeList.atObject(e.game.spatula.coords);if(e.pathing.activePath=e.pathing.astar.path(t,n),!e.pathing.activePath)return e.$emit("pathfindError",R.NoPathFound);if(e.pathing.activePath.length<2)return e.$emit("pathfindError",R.PathTooShort);e.pathing.followingPath=!0,e.pathing.activeNode=e.pathing.activePath[1],e.pathing.activeNodeIdx=1}}var Ze=zt;var ni=(e,t)=>(e%t+t)%t,ii=Math.PI*2,At=(e)=>Math.round(e*8192)/8192,si=(e)=>At(ni(Math.atan2(-e.x,-e.z),ii)),ri=(e)=>At(Math.atan2(e.y,Math.hypot(e.x,e.z)));class $t{idOrName;constructor(e){this.idOrName=e}validate(e){return!!(e.players[this.idOrName.toString()]||e.players.find((n)=>n.name===this.idOrName))}check(e){if(!e.me.playing)return!1;let t=e.players[this.idOrName.toString()]||e.players.find((n)=>n.name===this.idOrName);return t&&t.playing&&t.position&&t.position.x}execute(e){let t=e.players[this.idOrName.toString()]||e.players.find((a)=>a.name===this.idOrName),n={x:t.position.x-e.me.position.x,y:t.position.y-e.me.position.y-0.05,z:t.position.z-e.me.position.z},i=si(n),r=ri(n);e.state.yaw=i,e.state.pitch=r}}var Ye=$t;class Gt{validate(){return!0}check(e){return e.me.playing&&!e.state.reloading&&!e.state.swappingGun&&!e.state.usingMelee}execute(e){let t=new g;t.packInt8(p.melee),t.send(e.game.socket),e.usingMelee=!0,setTimeout(()=>{e.usingMelee=!1,e.swappingGun=!0,setTimeout(()=>{e.swappingGun=!1},0.5*Ne)},566.6666666666667)}}var Je=Gt;class Wt{validate(){return!0}check(e){return e.me.playing}execute(e){let t=new g;t.packInt8(p.pause),t.send(e.game.socket),setTimeout(()=>e.me.playing=!1,3000)}}var Xe=Wt;class Lt{validate(){return!0}check(e){return e.me.playing&&!e.state.reloading&&!e.state.swappingGun&&!e.state.usingMelee}execute(e){let t=new g;t.packInt8(p.reload),t.send(e.game.socket);let n=e.me.weapons[e.me.activeGun];if(n.ammo){let a=Math.min(Math.min(n.ammo.capacity,n.ammo.reload)-n.ammo.rounds,n.ammo.store);n.ammo.rounds+=a,n.ammo.store-=a}e.$emit("playerReload",e.me,n);let i=e.me.weapons[e.me.activeGun],r=i.ammo.rounds<1;e.state.reloading=!0,setTimeout(()=>e.state.reloading=!1,r?i.longReloadTime:i.shortReloadTime)}}var Qe=Lt;class _t{constructor(e,t={}){if(this.idOrName=e,this.reasons=[!!t.cheating,!!t.harassment,!!t.offensive,!!t.other],!this.reasons.includes(!0))this.reasons[3]=!0;for(let n=0;n<this.reasons.length;n++)if(this.reasons[n]===!0)this.reasonInt|=1<<n}validate(e){if(this.reasons.every((n)=>n===!1))return!1;if(!(e.players[this.idOrName.toString()]||e.players.find((n)=>n.name===this.idOrName)))return!1;return!0}check(e){if(!e.state.inGame)return!1;return!!(e.players[this.idOrName.toString()]||e.players.find((n)=>n.name===this.idOrName))}execute(e){let t=e.players[this.idOrName.toString()]||e.players.find((i)=>i.name===this.idOrName),n=new g;n.packInt8(p.reportPlayer),n.packString(t.uniqueId),n.packInt8(this.reasonInt),n.send(e.game.socket)}}var je=_t;class Kt{validate(){return!0}check(e){return e.game.isGameOwner}execute(e){let t=new g;t.packInt8(p.gameAction),t.packInt8(Z.Reset),t.send(e.game.socket)}}var Ve=Kt;var Q=(e)=>P(e)&&P(e).unlock==="default",j=(e,t)=>P(e)&&P(e).item_type_id===t;class Dt{constructor(e){this.changes={classIdx:e.gunId,hatId:e.hatId,stampId:e.stampId,grenadeId:e.grenadeId,meleeId:e.meleeId,colorIdx:e.eggColor,primaryId:e.primaryIds,secondaryId:e.secondaryIds},this.changes=Object.fromEntries(Object.entries(this.changes).filter(([,t])=>!!t))}validate(e){let t=this.changes;if(t.colorIdx&&t.colorIdx>=7&&!e.account.vip)return!1;if(t.colorIdx&&t.colorIdx>=14)return!1;if(j(t.hatId,$.Hat)&&!Q(t.hatId)&&!e.account.ownedItemIds.includes(t.hatId))return!1;if(j(t.stampId,$.Stamp)&&!Q(t.stampId)&&!e.account.ownedItemIds.includes(t.stampId))return!1;if(j(t.grenadeId,$.Grenade)&&!Q(t.grenadeId)&&!e.account.ownedItemIds.includes(t.grenadeId))return!1;if(j(t.meleeId,$.Melee)&&!Q(t.meleeId)&&!e.account.ownedItemIds.includes(t.meleeId))return!1;if(typeof t.classIdx==="number"&&t.classIdx>6||t.classIdx<0)return!1;if(this.changes.primaryId)for(let n=0;n<7;n++){let i=this.changes.primaryId[n];if(!j(i,$.Primary)||!Q(i)&&!e.account.ownedItemIds.includes(i))return!1}if(this.changes.secondaryId)for(let n=0;n<7;n++){let i=this.changes.secondaryId[n];if(!j(i,$.Secondary)||!Q(i)&&!e.account.ownedItemIds.includes(i))return!1}return!0}check(e){return!e.me.playing}execute(e){if(e.me&&this.changes.classIdx&&this.changes.classIdx!==e.me.selectedGun)e.me.weapons[0]=B(C[this.changes.classIdx]);e.state.weaponIdx=this.changes.classIdx||e.state.weaponIdx;let t={...e.account.loadout,...this.changes},n=e.api.queryServices({cmd:"saveLoadout",save:!0,firebaseId:e.account.firebaseId,sessionId:e.account.sessionId,loadout:t});if(e.account.loadout=t,e.me)n.then(()=>{if(e.state.inGame){let r=new g;r.packInt8(p.changeCharacter),r.packInt8(this.changes?.classIdx||e.me.selectedGun),r.send(e.game.socket)}let i=e.intents.includes(h.COSMETIC_DATA);Object.entries(this.changes).forEach(([r,a])=>{if(r==="classIdx")e.me.selectedGun=a;else if(r==="hatId")e.me.character.hat=i?P(a):a;else if(r==="stampId")e.me.character.stamp=i?P(a):a;else if(r==="grenadeId")e.me.character.grenade=i?P(a):a;else if(r==="meleeId")e.me.character.melee=i?P(a):a;else if(r==="colorIdx")e.me.character.eggColor=a;else if(r==="primaryId")e.me.character.primaryGun=i?P(a[e.me.selectedGun]):a;else if(r==="secondaryId")e.me.character.secondaryGun=i?P(a[e.me.selectedGun]):a})})}}var be=Dt;class Ht{validate(){return!0}check(e){if(e.me.playing)return!1;if(e.lastDeathTime+6000<Date.now())return!1;if(e.intents.includes(h.OBSERVE_GAME))return!1;return!0}execute(e){let t=new g;t.packInt8(p.requestRespawn),t.send(e.game.socket),e.state.buffer=[]}}var et=Ht;class Ct{constructor(e){this.manualWeapon=e}validate(){return typeof this.manualWeapon==="number"||typeof this.manualWeapon>"u"}check(e){return e.me.playing&&!e.state.reloading&&!e.state.swappingGun&&!e.state.usingMelee}execute(e){let t=+!e.me.activeGun;if(typeof this.manualWeapon==="number")t=this.manualWeapon;e.me.activeGun=t;let n=new g;n.packInt8(p.swapWeapon),n.packInt8(e.me.activeGun),n.send(e.game.socket)}}var tt=Ct;class Bt{validate(){return!0}check(e){if(!e.state.inGame||e.me.playing)return!1;if(e.game.gameModeId===0)return!1;if(e.intents.includes(h.OBSERVE_GAME))return!1;if(e.game.isPrivate)return!e.game.options.noTeamChange;let t=e.players,n=e.me.team,i=t.filter((a)=>a.team===n).length,r=t.filter((a)=>a.team!==n).length;if(r>i)return!1;if(i===r)return!1;return!0}execute(e){let t=new g;t.packInt8(p.switchTeam),t.send(e.game.socket)}}var nt=Bt;class qt{constructor(e=1){this.power=e}validate(){return typeof this.power==="number"&&this.power>=0&&this.power<=1}check(e){return e.me.playing&&!e.state.reloading&&!e.state.swappingGun&&!e.state.usingMelee}execute(e){let t=new g;t.packInt8(p.throwGrenade),t.packFloat(this.power),t.send(e.game.socket)}}var it=qt;var Zt={banPlayer:We,bootPlayer:Le,chat:_e,fire:Ke,gameOptions:De,goToAmmo:He,goToCoop:Ce,goToGrenade:Be,goToPlayer:qe,goToSpatula:Ze,lookAt:Ye,lookAtPos:J,melee:Je,movement:X,pause:Xe,reload:Qe,reportPlayer:je,resetGame:Ve,saveLoadout:be,spawn:et,swapWeapon:tt,switchTeam:nt,throwGrenade:it},Yt={BanPlayerDispatch:We,BootPlayerDispatch:Le,ChatDispatch:_e,FireDispatch:Ke,GameOptionsDispatch:De,GoToAmmoDispatch:He,GoToCoopDispatch:Ce,GoToGrenadeDispatch:Be,GoToPlayerDispatch:qe,GoToSpatulaDispatch:Ze,LookAtDispatch:Ye,LookAtPosDispatch:J,MeleeDispatch:Je,MovementDispatch:X,PauseDispatch:Xe,ReloadDispatch:Qe,ReportPlayerDispatch:je,ResetGameDispatch:Ve,SaveLoadoutDispatch:be,SpawnDispatch:et,SwapWeaponDispatch:tt,SwitchTeamDispatch:nt,ThrowGrenadeDispatch:it};var ai=(e)=>new Uint8Array(e.match(/.{2}/g).map((t)=>parseInt(t,16))),oi=new TextEncoder,Jt=async(e)=>{if(typeof process<"u"&&typeof process.getBuiltinModule==="function"){let r=process.getBuiltinModule("node:crypto"),a=Buffer.from("3496afa51f2a553ea1fc5211400c000b","hex");return r.createHmac("sha256",a).update(e).digest("hex")}let t=ai("3496afa51f2a553ea1fc5211400c000b"),n=await crypto.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await crypto.subtle.sign("HMAC",n,oi.encode(e));return Array.from(new Uint8Array(i)).map((r)=>r.toString(16).padStart(2,"0")).join("")},_=(e)=>{return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)},Xt=(e,t)=>{let n=Math.round(e/(Math.PI*2)*65535),i=0,r=Math.round((t+1.5)/3*32767),a=n<0?0:n;n=a>65535?65535:a;let o=Math.trunc(n);if(o<0)o=0;if(o>4294967295)o=4294967295;o=n>=0?o:0,o=n>65535?0:o;let c=o;i^=c;let u=r<0?0:r;n=u,u=n>32767?32767:n,n=u;let m=Math.trunc(n);if(m<0)m=0;if(m>4294967295)m=4294967295;m=n>=0?m:0,m=n>65535?0:m;let k=m,d=(k^4294934528)&65535,y=i^d,F=y&255,S=i<<8,T=(i&65280)>>>8;k=(S|T)>>>0;let A=F^k;y=y<<8|(y&65280)>>>8,c^=d,d=y^c&255,c=c<<8|(c&65280)>>8,i=c^i&255;let f=[];return f[3]=_(d&63),f[7]=_(k>>>8&63),f[4]=_(y>>>10&63),f[0]=_((i&252)>>>2),f[5]=_(y>>>4&48|A>>>4&15),f[2]=_(c>>>6&60|d>>>6&3),f[6]=_((k>>>14&3|A<<2)&63),f[1]=_((c>>>12&15|i<<4)&63),String.fromCharCode(...f)};var Qt=[];var V=[];var st=[];var ci=(e)=>{let t=s.unPackInt8U(),n=e.intents.includes(h.COSMETIC_DATA),i={id:t,uniqueId:s.unPackString(),name:s.unPackString(),safeName:s.unPackString(),charClass:s.unPackInt8U(),team:s.unPackInt8U(),primaryWeaponItem:n?P(s.unPackInt16U()):s.unPackInt16U(),secondaryWeaponItem:n?P(s.unPackInt16U()):s.unPackInt16U(),shellColor:s.unPackInt8U(),hatItem:n?P(s.unPackInt16U()):s.unPackInt16U(),stampItem:n?P(s.unPackInt16U()):s.unPackInt16U(),stampPosX:s.unPackInt8(),stampPosY:s.unPackInt8(),grenadeItem:n?P(s.unPackInt16U()):s.unPackInt16U(),meleeItem:n?P(s.unPackInt16U()):s.unPackInt16U(),x:s.unPackFloat(),y:s.unPackFloat(),z:s.unPackFloat(),$dx:s.unPackFloat(),$dy:s.unPackFloat(),$dz:s.unPackFloat(),yaw:s.unPackRadU(),pitch:s.unPackRad(),score:s.unPackInt32U(),$kills:s.unPackInt16U(),$deaths:s.unPackInt16U(),$streak:s.unPackInt16U(),totalKills:s.unPackInt32U(),totalDeaths:s.unPackInt32U(),bestStreak:s.unPackInt16U(),$bestOverallStreak:s.unPackInt16U(),shield:s.unPackInt8U(),hp:s.unPackInt8U(),playing:s.unPackInt8U(),weaponIdx:s.unPackInt8U(),$controlKeys:s.unPackInt8U(),upgradeProductId:s.unPackInt8U(),activeShellStreaks:s.unPackInt8U(),social:s.unPackLongString(),hideBadge:s.unPackInt8U()};e.game.mapIdx=s.unPackInt8U(),e.game.isPrivate=s.unPackInt8U()===1,e.game.gameModeId=s.unPackInt8U();let r=new se(i,e.game.gameMode===I.KOTC?e.game.activeZone:null);if(!e.players[i.id])e.players[i.id]=r;if(e.$emit("playerJoin",r),e.me.id===i.id)e.me=r,e.$emit("botJoin",e.me)},jt=ci;var pi=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=e.players[t];if(!i)return;switch(n){case x.HardBoiled:if(t===e.me.id)e.me.shieldHp=100;i.streakRewards.push(x.HardBoiled);break;case x.EggBreaker:i.streakRewards.push(x.EggBreaker);break;case x.Restock:{if(i.grenades=3,i.weapons[0]&&i.weapons[0].ammo)i.weapons[0].ammo.rounds=i.weapons[0].ammo.capacity,i.weapons[0].ammo.store=i.weapons[0].ammo.storeMax;if(i.weapons[1]&&i.weapons[1].ammo)i.weapons[1].ammo.rounds=i.weapons[1].ammo.capacity,i.weapons[1].ammo.store=i.weapons[1].ammo.storeMax;break}case x.OverHeal:i.hp=Math.min(200,i.hp+100),i.streakRewards.push(x.OverHeal);break;case x.DoubleEggs:i.streakRewards.push(x.DoubleEggs);break;case x.MiniEgg:i.scale=0.5,i.streakRewards.push(x.MiniEgg);break}e.$emit("playerBeginStreak",i,n)},Vt=pi;var ui=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=e.players[t];if(!i)return;if(!e.intents.includes(h.CHALLENGES))return e.$emit("challengeComplete",i,n);let r=e.account.challenges.find((a)=>a.id===n);if(e.$emit("challengeComplete",i,r),i.id===e.me.id)e.refreshChallenges()},bt=ui;var hi=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=s.unPackInt16U(),r=s.unPackInt16U(),a=s.unPackInt8U(),o=s.unPackInt16U(),c=s.unPackInt16U(),u=s.unPackInt16U(),m=s.unPackInt16U(),k=s.unPackInt8(),d=s.unPackInt8(),y=e.intents.includes(h.COSMETIC_DATA),F=y?P(i):i,S=y?P(r):r,T=y?P(o):o,W=y?P(c):c,A=y?P(u):u,K=y?P(m):m,f=e.players[t];if(f){let v=structuredClone(f.character),E=f.selectedGun;if(f.character.eggColor=a,f.character.primaryGun=F,f.character.secondaryGun=S,f.character.stamp=W,f.character.hat=T,f.character.grenade=A,f.character.melee=K,f.character.stampPos.x=k,f.character.stampPos.y=d,f.selectedGun=n,f.weapons[0]=B(C[n]),E!==f.selectedGun)e.$emit("playerChangeGun",f,E,f.selectedGun);if(v!==f.character)e.$emit("playerChangeCharacter",f,v,f.character)}},en=hi;var mi=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=s.unPackString().valueOf(),r=e.players[t];e.$emit("chat",r,i,n)},tn=mi;var li=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=s.unPackInt8U(),r=s.unPackInt16U(),a=e.players[t];if(!a)return;if(e.game.collectables[n]=e.game.collectables[n].filter((o)=>o.id!==r),n===ae.Ammo){let o=a.weapons[i];if(o&&o.ammo)o.ammo.store=Math.min(o.ammo.storeMax,o.ammo.store+o.ammo.pickup),e.$emit("playerCollectAmmo",a,o,r)}if(n===ae.Grenade){if(a.grenades++,a.grenades>3)a.grenades=3;e.$emit("playerCollectGrenade",a,r)}},nn=li;var fi=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U();s.unPackInt8U(),s.unPackInt8U();let i=s.unPackInt8U(),r=e.players[t],a=e.players[n],o=r?structuredClone(r):null;if(r){if(r.id===e.me.id)e.lastDeathTime=Date.now();r.playing=!1,r.streak=0,r.hp=100,r.spawnShield=0,r.stats.totalDeaths++,r.inKotcZone=!1,e.$emit("playerLeaveZone",r)}if(a){if(a.streak++,a.stats.totalKills++,a.streak>a.stats.bestStreak)a.stats.bestStreak=a.streak}e.$emit("playerDeath",r,a,o,i)},sn=fi;var di=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=e.players[t];if(!i)return;if([x.EggBreaker,x.OverHeal,x.DoubleEggs,x.MiniEgg].includes(n)&&i.streakRewards.includes(n))i.streakRewards=i.streakRewards.filter((a)=>a!==n);if(n===x.MiniEgg)i.scale=1;e.$emit("playerEndStreak",i,n)},rn=di;var gi=(e)=>{let t=new g;t.packInt8(p.eventModifier),t.send(e.game.socket)},an=gi;var ki=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt16U(),i=s.unPackFloat(),r=s.unPackFloat(),a=s.unPackFloat(),o=s.unPackInt8U(),c=s.unPackFloat();if(e.intents.includes(h.COSMETIC_DATA))n=P(n);if(t===$.Grenade)e.$emit("grenadeExplode",n,{x:i,y:r,z:a},o,c);else e.$emit("rocketHit",{x:i,y:r,z:a},o,c)},on=ki;var yi=(e)=>{let t=s.unPackInt8U(),n={posX:s.unPackFloat(),posY:s.unPackFloat(),posZ:s.unPackFloat(),dirX:s.unPackFloat(),dirY:s.unPackFloat(),dirZ:s.unPackFloat()},i=e.players[t];if(!i)return;let r=i.weapons[i.activeGun];if(r&&r.ammo)r.ammo.rounds--,e.$emit("playerFire",i,r,n)},cn=yi;var Pi=(e)=>{let t=s.unPackInt8U();if(t===Z.Pause)e.$emit("gameForcePause"),setTimeout(()=>e.me.playing=!1,3000);if(t===Z.Reset){if(Object.values(e.players).forEach((n)=>n.streak=0),e.game.gameModeId!==I.FFA)e.game.teamScore=[0,0,0];if(e.game.gameModeId===I.Spatula)e.game.spatula.controlledBy=0,e.game.spatula.controlledByTeam=0,e.game.spatula.coords={x:0,y:0,z:0};if(e.game.gameModeId===I.KOTC)e.game.stage=b.Capturing,e.game.zoneNumber=0,e.game.activeZone=null,e.game.capturing=0,e.game.captureProgress=0,e.game.numCapturing=0,e.game.capturePercent=0;e.$emit("gameReset")}},pn=Pi;class rt{constructor(e){this.content=[],this.scoreFunction=e}push(e){this.content.push(e),this.bubbleUp(this.content.length-1)}rescoreElement(e){let t=this.content.indexOf(e);if(t!==-1)this.bubbleUp(t),this.sinkDown(t)}pop(){let e=this.content[0],t=this.content.pop();if(this.content.length>0)this.content[0]=t,this.sinkDown(0);return e}remove(e){let t=this.content.indexOf(e);if(t===-1)return;let n=this.content.pop();if(t<this.content.length)this.content[t]=n,this.bubbleUp(t),this.sinkDown(t)}size(){return this.content.length}bubbleUp(e){let t=this.content[e],n=this.scoreFunction(t);while(e>0){let i=e-1>>1,r=this.content[i],a=this.scoreFunction(r);if(n>=a)break;this.content[i]=t,this.content[e]=r,e=i}}includes(e){return this.content.includes(e)}sinkDown(e){let t=this.content.length,n=this.content[e],i=this.scoreFunction(n);while(!0){let r=(e<<1)+1,a=r+1,o=null;if(r<t){if(this.scoreFunction(this.content[r])<i)o=r}if(a<t){if(this.scoreFunction(this.content[a])<(o===null?i:this.scoreFunction(this.content[r])))o=a}if(o===null)break;this.content[e]=this.content[o],this.content[o]=n,e=o}}}class ue{constructor(e){this.list=e}heuristic(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)+Math.abs(e.z-t.z)}reversePath(e){let t=[];while(e.parent)t.push(e),e=e.parent;return t.reverse(),t}path(e,t){this.list.clean();let n=new rt((r)=>r.f),i=new Set;e.h=this.heuristic(e,t),e.g=0,e.f=e.g+e.h,e.visited=!0,n.push(e);while(n.size()!==0){let r=n.pop();if(r===t)return this.reversePath(r);i.add(r);let a=r.links;for(let o=0;o<a.length;o++){let c=a[o];if(i.has(c))continue;let u=r.g+1,m=c.visited;if(!m||u<c.g)if(c.visited=!0,c.parent=r,c.g=u,c.h=this.heuristic(c.position,t.position),c.f=c.g+c.h,m)n.rescoreElement(c);else n.push(c)}}return null}}class at{constructor(e,t){if(this.x=t.x,this.y=t.y,this.z=t.z,this.positionStr=`${this.x},${this.y},${this.z}`,this.position={x:this.x,y:this.y,z:this.z},this.meshType=e.split(".").pop(),this.f=0,this.g=0,this.h=0,this.visited=null,this.parent=null,this.closed=null,this.links=[],this.meshType==="wedge"&&typeof t.ry<"u")this.ry=t.ry??0}isFull(){return this.meshType==="full"}canWalkThrough(){return this.meshType==="none"||this.meshType==="ladder"}canWalkOn(){return this.meshType==="full"}isLadder(){return this.meshType==="ladder"}isStair(){return this.meshType==="wedge"}isAir(){return this.meshType==="none"}canLink(e,t){let n=this.x-e.x,i=this.z-e.z,r=this.y-e.y,a=Math.abs(n),o=Math.abs(r),c=Math.abs(i);if(a+o+c===0||a+c>1||this.isFull()||e.isFull())return!1;let u=t.at(this.x,this.y-1,this.z),m=t.at(e.x,e.y-1,e.z);if(!u||!m)return!1;let k={0:{x:0,z:-1},1:{x:-1,z:0},2:{x:0,z:1},3:{x:1,z:0}};if(this.meshType==="none"){if(r===1&&e.canWalkThrough())return!0;if(u.canWalkOn()||u.isLadder()){if(e.meshType==="none"||e.meshType==="ladder"&&o===0||e.meshType==="wedge"&&r===0&&n===-k[e.ry].x&&i===-k[e.ry].z)return!0}return!1}else if(this.meshType==="ladder"){if(o===1&&e.canWalkThrough())return!0;if(o===0&&u.canWalkOn())return!0;return e.meshType==="ladder"&&(o===1||u.canWalkOn()&&m.canWalkOn())}else if(this.meshType==="wedge"){if(this.x+k[this.ry].x===e.x&&this.z+k[this.ry].z===e.z&&this.y+1===e.y)return!0;return this.x-k[this.ry].x===e.x&&this.z-k[this.ry].z===e.z&&(this.y===e.y||this.y-1===e.y)}return!1}flatCenter(){return{x:this.x+0.5,y:this.y,z:this.z+0.5}}flatRadialDistance(e){let t=this.flatCenter();return Math.hypot(t.x-e.x,t.z-e.z)}}class ot{list=[];nodeMap=null;constructor(e){let t=new Set;for(let i of Object.keys(e.data))for(let r of e.data[i])t.add(r.x<<16|r.y<<8|r.z),this.list.push(new at(i,r));for(let i=0;i<e.width;i++)for(let r=0;r<e.height;r++)for(let a=0;a<e.depth;a++)if(!t.has(i<<16|r<<8|a))this.list.push(new at("SPECIAL.air.none",{x:i,y:r,z:a}));this.nodeMap=new Map;for(let i of this.list)this.nodeMap.set(i.positionStr,i);let n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]];for(let i of this.list)for(let[r,a,o]of n){let c=`${i.x+r},${i.y+a},${i.z+o}`,u=this.nodeMap.get(c);if(u&&i.canLink(u,this))i.links.push(u)}}at(e,t,n){return this.nodeMap?.get(`${e},${t},${n}`)}atObject({x:e,y:t,z:n}){return this.nodeMap?.get(`${Math.floor(e)},${Math.floor(t)},${Math.floor(n)}`)}clean(){for(let e of this.list)e.f=0,e.g=0,e.h=0,e.visited=null,e.parent=null,e.closed=null}hasLineOfSight(e,t){let n=t.x-e.x,i=t.y-e.y,r=t.z-e.z,a=Math.max(Math.abs(n),Math.abs(i),Math.abs(r)),o=n/a,c=i/a,u=r/a,m=e.x,k=e.y,d=e.z;for(let y=0;y<=a;y++){if(this.at(Math.round(m),Math.round(k),Math.round(d))?.isFull())return!1;m+=o,k+=c,d+=u}return!0}}var xi=Object.fromEntries(Object.entries(I).map(([e,t])=>[t,e])),Ii=async(e)=>{if(e.me.id=s.unPackInt8U(),e.me.team=s.unPackInt8U(),e.game.gameModeId=s.unPackInt8U(),e.game.gameMode=xi[e.game.gameModeId],e.game.mapIdx=s.unPackInt8U(),e.game.map=V[e.game.mapIdx],e.game.playerLimit=s.unPackInt8U(),e.game.isGameOwner=s.unPackInt8U()===1,e.game.isPrivate=s.unPackInt8U()===1||e.game.isGameOwner,s.unPackInt8U(),e.intents.includes(h.LOAD_MAP)||e.intents.includes(h.PATHFINDING)){let n=await dt(e.game.map.filename,e.game.map.hash);if(e.game.map)e.game.map.raw=n;if(e.$emit("mapLoad",e.game.map.raw),e.game.gameModeId===I.KOTC){let i=e.game.map.raw.data["DYNAMIC.capture-zone.none"];if(i){if(e.game.map.zones=gt(i),!e.game.activeZone)e.game.activeZone=e.game.map.zones[e.game.zoneNumber-1]}else delete e.game.map.zones}if(e.intents.includes(h.PATHFINDING))e.pathing.nodeList=new ot(e.game.map.raw),e.pathing.astar=new ue(e.pathing.nodeList)}e.state.inGame=!0,e.lastDeathTime=Date.now();let t=new g;if(t.packInt8(p.clientReady),t.send(e.game.socket),e.updateIntervalId=setInterval(()=>e.update(),33.333333333333336),e.intents.includes(h.PING)){e.lastPingTime=Date.now();let n=new g;n.packInt8(p.ping),n.send(e.game.socket)}if(e.intents.includes(h.NO_AFK_KICK))e.afkKickInterval=setInterval(()=>{if(e.state.inGame&&!e.me.playing&&Date.now()-e.lastDeathTime>=15000){let n=new g;n.packInt8(p.keepAlive),n.send(e.game.socket)}},15000);e.$emit("gameReady")},un=Ii;var hn=Object.fromEntries(Object.entries(ve).map(([e,t])=>[e[0].toLowerCase()+e.slice(1),t])),wi=(e)=>{let t=structuredClone(e.game.options),n=s.unPackInt8U(),i=s.unPackInt8U(),r=s.unPackInt8U();if(n<1||n>4)n=4;if(i<0||i>8)i=4;if(r>16)r=4;e.game.options.gravity=n/4,e.game.options.damage=i/4,e.game.options.healthRegen=r/4;let a=s.unPackInt8U();Object.keys(hn).forEach((o)=>{let c=a&hn[o]?1:0;e.game.options[o]=c}),e.game.options.weaponsDisabled=Array.from({length:7},()=>s.unPackInt8U()===1),e.game.options.mustUseSecondary=e.game.options.weaponsDisabled.every((o)=>o),e.$emit("gameOptionsChange",t,e.game.options)},mn=wi;var Si=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=s.unPackFloat(),r=s.unPackFloat();if(!e.me)return;if(e.me.shieldHp=t,e.me.hp=n,e.me.shieldHp<=0)e.me.streakRewards=e.me.streakRewards.filter((a)=>a!==x.HardBoiled),e.$emit("selfShieldLost",e.me.hp,{dx:i,dz:r});else e.$emit("selfShieldHit",e.me.shieldHp,e.me.hp,{dx:i,dz:r})},ln=Si;var Ui=(e)=>{let t=s.unPackInt8U();s.unPackFloat(),s.unPackFloat();let n=e.me.hp;e.me.hp=t,e.$emit("playerDamage",e.me,n,e.me.hp)},fn=Ui;var Ti=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=e.players[t];if(!i)return;let r=i.hp;i.hp=n,e.$emit("playerDamage",i,r,i.hp)},dn=Ti;var vi=(e)=>{let t=s.unPackInt8U(),n=e.players[t];if(n)e.$emit("playerMelee",n)},gn=vi;var Ni=(e)=>{if(e.game.gameModeId===I.Spatula){let t=structuredClone(e.game);e.game.teamScore[1]=s.unPackInt16U(),e.game.teamScore[2]=s.unPackInt16U();let n={x:s.unPackFloat(),y:s.unPackFloat(),z:s.unPackFloat()},i=s.unPackInt8U(),r=s.unPackInt8U();e.game.spatula={coords:n,controlledBy:i,controlledByTeam:r},e.$emit("gameStateChange",t,e.game)}else if(e.game.gameModeId===I.KOTC){let t=structuredClone(e.game);e.game.stage=s.unPackInt8U(),e.game.zoneNumber=s.unPackInt8U(),e.game.capturing=s.unPackInt8U(),e.game.captureProgress=s.unPackInt16U(),e.game.numCapturing=s.unPackInt8U(),e.game.teamScore[1]=s.unPackInt8U(),e.game.teamScore[2]=s.unPackInt8U(),e.game.capturePercent=e.game.captureProgress/1000,e.game.activeZone=e.game.map.zones?e.game.map.zones[e.game.zoneNumber-1]:null;let n=Object.values(e.players).filter((i)=>i.inKotcZone&&i.playing);if(e.game.activeZone)Object.values(e.players).forEach((i)=>i.updateKotcZone(e.game.activeZone));if(e.game.numCapturing<=0)Object.values(e.players).forEach((i)=>{i.inKotcZone=!1,e.$emit("playerLeaveZone",i)});e.$emit("gameStateChange",t,e.game,n)}else if(e.game.gameModeId===I.Team)e.game.teamScore[1]=s.unPackInt16U(),e.game.teamScore[2]=s.unPackInt16U();if(e.game.gameModeId!==I.Spatula)delete e.game.spatula;if(e.game.gameModeId!==I.KOTC)delete e.game.stage,delete e.game.zoneNumber,delete e.game.capturing,delete e.game.captureProgress,delete e.game.numCapturing,delete e.game.numCapturing,delete e.game.activeZone;if(e.game.gameModeId===I.FFA)delete e.game.teamScore},kn=Ni;var Oi=(e)=>{let t=s.unPackInt8U(),n=e.players[t];if(n){if(n.playing=!1,n.streakRewards)n.streakRewards=[];if(e.$emit("playerPause",n),n.inKotcZone)n.inKotcZone=!1,e.$emit("playerLeaveZone",n)}},yn=Oi;var Ri=(e)=>{if(!e.intents.includes(h.PING))return;let t=e.ping;e.ping=Date.now()-e.lastPingTime,e.$emit("pingUpdate",t,e.ping),setTimeout(()=>{let n=new g;n.packInt8(p.ping),n.send(e.game.socket),e.lastPingTime=Date.now()},1000)},Pn=Ri;var Fi=(e)=>{let t=s.unPackInt8U(),n=s.unPackString(128),i=s.unPackString(32),r=e.players[t];if(!r)return;r.admin={ip:i,dbId:n},e.$emit("playerInfo",r,i,n)},xn=Fi;var Ei=(e)=>{let t=s.unPackInt8U(),n=e.players[t];if(!n)return;let i=n.weapons[n.activeGun];if(i.ammo){let r=Math.min(Math.min(i.ammo.capacity,i.ammo.reload)-i.ammo.rounds,i.ammo.store);i.ammo.rounds+=r,i.ammo.store-=r}e.$emit("playerReload",n,i)},In=Ei;var Mi=(e)=>{let t=s.unPackInt8U(),n=structuredClone(e.players[t]);delete e.players[t],e.$emit("playerLeave",n)},wn=Mi;var zi=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt16U(),i=s.unPackFloat(),r=s.unPackFloat(),a=s.unPackFloat(),o=s.unPackInt8U(),c=s.unPackInt8U(),u=s.unPackInt8U(),m=s.unPackInt8U(),k=s.unPackInt8U(),d=e.players[t];if(d){if(d.playing=!0,d.randomSeed=n,d.weapons[0]&&d.weapons[0].ammo)d.weapons[0].ammo.rounds=o;if(d.weapons[0]&&d.weapons[0].ammo)d.weapons[0].ammo.store=c;if(d.weapons[1]&&d.weapons[1].ammo)d.weapons[1].ammo.rounds=u;if(d.weapons[1]&&d.weapons[1].ammo)d.weapons[1].ammo.store=m;d.grenades=k,d.position={x:i,y:r,z:a},d.spawnShield=120,e.$emit("playerRespawn",d)}},Sn=zi;var Ai=(e)=>{let t=new g;t.packInt8(e.intents.includes(h.OBSERVE_GAME)?p.observeGame:p.joinGame),t.packString(e.game.raw.uuid),t.packInt8(+e.intents.includes(h.VIP_HIDE_BADGE)),t.packInt8(e.state.weaponIdx||e.account?.loadout?.classIdx||0),t.packString(e.state.name),t.packInt32(e.account.session),t.packString(e.account.sessionId),t.packString(e.account.firebaseId),t.send(e.game.socket)},Un=Ai;var $i=(e)=>{let t=s.unPackInt16U(),n=s.unPackInt8U(),i=s.unPackFloat(),r=s.unPackFloat(),a=s.unPackFloat();e.game.collectables[n].push({id:t,x:i,y:r,z:a}),e.$emit("spawnItem",n,{x:i,y:r,z:a},t)},Tn=$i;var Gi=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=e.players[t];if(!i)return;let r=i.team;i.team=n,i.streak=0,e.$emit("playerSwitchTeam",i,r,n)},vn=Gi;var Wi=(e)=>{let t=s.unPackInt8U(),n=e.players[t];s.unPackInt8U();let i=s.unPackInt8U(),r=s.unPackFloat(),a=s.unPackFloat(),o=s.unPackFloat();if(e.me.climbing=!!s.unPackInt8U(),s.unPackInt8U(),s.unPackInt8U(),!n)return;e.state.serverStateIdx=i;let c=n.position.x,u=n.position.y,m=n.position.z;if(n.position.x=r,n.position.y=a,n.position.z=o,c!==r||u!==a||m!==o)e.$emit("playerMove",n,{x:c,y:u,z:m},{x:r,y:a,z:o})},Nn=Wi;var Li=(e)=>{let t=s.unPackInt8U(),n=s.unPackFloat(),i=s.unPackFloat(),r=s.unPackFloat(),a=s.unPackInt8U(),o=e.players[t];if(!o||o.id===e.me.id){for(let T=0;T<H;T++)s.unPackInt8U(),s.unPackRadU(),s.unPackRad(),s.unPackInt8U();return}for(let T=0;T<H;T++){let W=s.unPackInt8U();if(W&O.Jump)o.jumping=!0;else o.jumping=!1;if(W&O.Scope)o.scoping=!0;else o.scoping=!1;let A=structuredClone(o.view);if(o.view.yaw=s.unPackRadU(),o.view.pitch=s.unPackRad(),o.view.yaw!==A.yaw||o.view.pitch!==A.pitch)e.$emit("playerRotate",o,A,o.view);o.scale=s.unPackInt8U()}let c=o.position,u=c.x!==n||c.y!==i||c.z!==r,m=o.climbing!==a,k=u||m,d=k?structuredClone(c):null;if(c.x!==n)c.x=n;if(c.z!==r)c.z=r;if(!o.jumping||Math.abs(c.y-i)>0.5)c.y=i;if(m)o.climbing=a;if(!k)return;if(e.$emit("playerMove",o,d,c),e.game.gameModeId!==I.KOTC)return;let y=e.game.activeZone,F=!!o.inKotcZone;if(!y&&F){o.inKotcZone=!1,e.$emit("playerLeaveZone",o);return}o.updateKotcZone(y);let S=!!o.inKotcZone;if(F!==S)o.inKotcZone=S,e.$emit(S?"playerEnterZone":"playerLeaveZone",o)},On=Li;var _i=(e)=>{let t=s.unPackInt8U(),n=s.unPackFloat(),i=s.unPackFloat(),r=s.unPackFloat(),a=s.unPackFloat(),o=s.unPackFloat(),c=s.unPackFloat(),u=e.players[t];if(u)u.grenades--,e.$emit("playerThrowGrenade",u,{x:n,y:i,z:r},{x:a,y:o,z:c})},Rn=_i;var Ki=(e)=>{let t=s.unPackInt32U(),n=e.account.eggBalance;e.account.eggBalance=t,e.$emit("balanceUpdate",n,t)},Fn=Ki;var Di=(e)=>{let t=s.unPackInt8U(),n=s.unPackInt8U(),i=e.players[t];if(i)i.activeGun=n,e.$emit("playerSwapWeapon",i,n)},En=Di;var ct=(e,t)=>(e%t+t)%t;class pt{static Intents=h;regionList=[];matchmakerListeners=[];#e=[];#t={};#s=[];#n;#r;constructor(e={}){if(e.proxy&&typeof process>"u")throw Error("proxies do not work in this environment");if(this.intents=e.intents||[],this.intents.includes(h.COSMETIC_DATA)){if(!P(1001))throw Error("you cannot use the COSMETIC_DATA intent inside of the browser bundles")}if(this.instance=e.instance||"shellshock.io",this.protocol=e.protocol||"wss",this.proxy=e.proxy||"",this.connectionTimeout=e.connectionTimeout||5000,this.state={name:"yolkbot",weaponIdx:0,inGame:!1,chatLines:0,yaw:0,pitch:0,controlKeys:0,reloading:!1,swappingGun:!1,usingMelee:!1,stateIdx:0,serverStateIdx:0,shotsFired:0,buffer:[]},this.players={},this.me=new se({}),this.game={raw:{},code:"",region:"",socket:null,gameModeId:0,gameMode:"ffa",mapIdx:0,map:{filename:"",hash:"",name:"",modes:{FFA:!1,Teams:!1,Spatula:!1,King:!1},availability:"both",numPlayers:"18",raw:{},nodes:{},zones:[]},playerLimit:0,isGameOwner:!1,isPrivate:!0,options:{gravity:1,damage:1,healthRegen:1,locked:!1,noTeamChange:!1,noTeamShuffle:!1,weaponsDisabled:Array(7).fill(!1),mustUseSecondary:!1},collectables:[[],[]],teamScore:[0,0,0],spatula:{coords:{x:0,y:0,z:0},controlledBy:0,controlledByTeam:0},stage:b.Capturing,zoneNumber:0,activeZone:[],capturing:0,captureProgress:0,numCapturing:0,capturePercent:0},this.#r=this.game,this.account={id:0,firebase:{idToken:"",refreshToken:"",expiresIn:"3600",localId:""},firebaseId:"",sessionId:"",session:0,email:"",password:"",cw:{atLimit:!1,limit:0,secondsUntilPlay:0,canPlayAgain:Date.now()},loadout:{hatId:null,meleeId:0,stampId:null,classIdx:0,colorIdx:0,grenadeId:0,primaryId:[3100,3600,3400,3800,4000,4200,4500],secondaryId:[,,,,,,,].fill(3000),stampPositionX:0,stampPositionY:0},ownedItemIds:[],vip:!1,emailVerified:!1,isAged:!1,adminRoles:0,rawLoginData:{},eggBalance:0,isDoubleEggWeeknd:()=>{let t=new Date().getUTCDay();return t>=5&&new Date().getUTCHours()>=20||t===6||t===0}},this.#n=this.account,this.api=new kt({proxy:this.proxy,protocol:this.protocol,instance:this.instance,connectionTimeout:this.connectionTimeout}),this.ping=0,this.lastPingTime=-1,this.lastDeathTime=-1,this.lastUpdateTick=0,this.pathing={nodeList:null,followingPath:!1,activePath:null,activeNode:null,activeNodeIdx:0},this.hasQuit=!1,this.intents.includes(h.NO_AFK_KICK))this.afkKickInterval=0;if(this.intents.includes(h.RENEW_SESSION))this.renewSessionInterval=0}dispatch(e,t){if(e.validate(this)){if(e.check(this))e.execute(this);else this.#e.push(e);return!0}return console.error(`${t?"emit":"dispatch"}: validation failed for dispatch ${e.constructor.name}`),console.error("this means the dispatch will NEVER RUN!"),console.error("make sure all parameters are valid and that any player IDs are in the game"),!1}async createAccount(e,t){this.account=this.#n,this.account.email=e,this.account.password=t;let n=await this.api.createAccount(e,t);return this.processLoginData(n)}async login(e,t){this.account=this.#n,this.account.email=e,this.account.password=t;let n=await this.api.loginWithCredentials(e,t);return this.processLoginData(n)}async loginWithRefreshToken(e){this.account=this.#n;let t=await this.api.loginWithRefreshToken(e);return this.processLoginData(t)}async loginAnonymously(){this.account=this.#n;let e=await this.api.loginAnonymously();return this.processLoginData(e)}processLoginData(e){if(!e.ok||!e.playerOutput){if(this.$emit("authFail",e),e.ok&&!e.playerOutput)console.error("processLoginData: missing playerOutput but is ok",e);return{...e,error:Fe.InternalError,ok:!1}}if(e.banRemaining)return this.$emit("banned",e.banRemaining),l(Fe.AccountBanned);if(this.account.firebase=e.firebase,e=e.playerOutput,this.account.rawLoginData=e,this.account.adminRoles=e.adminRoles||0,this.account.eggBalance=e.currentBalance,this.account.emailVerified=e.emailVerified,this.account.firebaseId=e.firebaseId,this.account.id=e.id,this.account.isAged=new Date(e.dateCreated).getTime()<1714546800000,this.account.loadout=e.loadout,this.account.ownedItemIds=e.ownedItemIds,this.account.session=e.session,this.account.sessionId=e.sessionId,this.account.vip=e.active_sub==="IsVIP",this.intents.includes(h.BOT_STATS))this.account.stats={lifetime:e.statsLifetime,monthly:e.statsCurrent};if(this.intents.includes(h.CHALLENGES))this.#i(e.challenges);if(this.$emit("authSuccess",this.account),this.intents.includes(h.RENEW_SESSION))this.renewSessionInterval=setInterval(async()=>{if(!this.account?.sessionId)return clearInterval(this.renewSessionInterval);if((await this.api.queryServices({cmd:"renewSession",sessionId:this.account.sessionId})).data!=="renewed")this.$emit("sessionExpired")},600000);return{ok:!0,account:this.account}}#i(e){this.account.challenges=[];for(let t of e){let n=Qt.find((i)=>i.id===t.challengeId);if(!n)continue;delete t.playerId,this.account.challenges.push({raw:{challengeInfo:n,challengeData:t},id:t.challengeId,name:n.loc.title,desc:n.loc.desc,rewardEggs:n.reward,isRerolled:!!t.reset,isClaimed:!!t.claimed,isCompleted:!!t.completed,progressNum:t.progress,goalNum:n.goal})}}async createMatchmaker(){let e=new ne(`${this.protocol}://${this.instance}/matchmaker/`,this.proxy);if(e.autoReconnect=!0,!await e.tryConnect())return l(ft.WebSocketConnectFail);this.matchmaker=e;let n=[];return this.matchmaker.onmessage=async(i)=>{let r=JSON.parse(i.data);if(r.command==="validateUUID"){let a=setTimeout(()=>{console.error("createMatchmaker: the matchmaker did not respond to our validateUUID"),console.error("createMatchmaker: this means yolkbot is broken, please report this on Github"),console.error("createMatchmaker: https://github.com/yolkorg/yolkbot (or join the Discord)")},5000);return n.push(a),this.matchmaker.send(JSON.stringify({command:"validateUUID",hash:await Jt(r.uuid)}))}if(r.command==="gameFound")n.forEach((a)=>clearTimeout(a));this.matchmakerListeners.forEach((a)=>a(r))},{ok:!0}}async getRegions(){if(!this.matchmaker){let e=await this.createMatchmaker();if(!e.ok)return e}return new Promise((e)=>{let t=(n)=>{if(n.command==="regionList")this.matchmakerListeners.splice(this.matchmakerListeners.indexOf(t),1),this.regionList=n.regionList,e({ok:!0,regionList:this.regionList})};this.matchmakerListeners.push(t),this.matchmaker.send(JSON.stringify({command:"regionList"}))})}async initSession(){if(!this.account.sessionId&&!this.intents.includes(h.NO_LOGIN)){let e=await this.loginAnonymously();if(!e.ok)return e}if(!this.matchmaker){let e=await this.createMatchmaker();if(!e.ok)return e}return{ok:!0}}async findPublicGame(e,t){if(typeof e!=="string")return l(U.MissingParams);if(typeof t!=="number")return l(U.MissingParams);if(!(this.regionList.length?this.regionList:st).find((o)=>o.id===e)&&!this.intents.includes(h.NO_REGION_CHECK))return l(U.InvalidRegion);let i;if(typeof t==="number")if(Object.values(I).indexOf(t)>-1)i=t;else return l(U.InvalidMode);else if(typeof t==="string"){let o=Object.keys(I).find((c)=>c.toLowerCase()===t.toLowerCase());if(o)i=I[o];else return l(U.InvalidMode)}else return l(U.InvalidMode);let r=await this.initSession();if(!r.ok)return r;let a=await new Promise((o)=>{let c=(u)=>{if(u.command==="notice")return;if(this.matchmakerListeners.splice(this.matchmakerListeners.indexOf(c),1),u.command==="gameFound")return o(u);if(u.error==="sessionNotFound")return o(l(U.SessionExpired));console.error("findPublicGame: unknown matchmaker response",JSON.stringify(u)),o(l(U.InternalError))};this.matchmakerListeners.push(c),this.matchmaker.send(JSON.stringify({command:"findGame",region:e,playType:oe.JoinPublic,gameType:i,sessionId:this.account.sessionId}))});return{ok:!0,region:a.region,subdomain:a.subdomain,id:a.id,private:a.private,raw:a}}async createPrivateGame(e,t,n){if(typeof e!=="string")return l(U.MissingParams);if(!(this.regionList.length?this.regionList:st).find((u)=>u.id===e)&&!this.intents.includes(h.NO_REGION_CHECK))return l(U.InvalidRegion);let r;if(typeof t==="number")if(Object.values(I).indexOf(t)>-1)r=t;else return l(U.InvalidMode);else if(typeof t==="string"){let u=Object.keys(I).find((m)=>m.toLowerCase()===t.toLowerCase());if(u)r=I[u];else return l(U.InvalidMode)}else return l(U.InvalidMode);let a=V.findIndex((u)=>u.name.toLowerCase()===n.toLowerCase());if(a===-1)return l(U.InvalidMap);let o=await this.initSession();if(!o.ok)return o;let c=await new Promise((u)=>{let m=(k)=>{if(k.command==="notice")return;if(this.matchmakerListeners.splice(this.matchmakerListeners.indexOf(m),1),k.command==="gameFound")return u(k);if(k.error==="sessionNotFound")return u(l(U.SessionExpired));console.error("createPrivateGame: unknown matchmaker response",JSON.stringify(k)),u(l(U.InternalError))};this.matchmakerListeners.push(m),this.matchmaker.send(JSON.stringify({command:"findGame",region:e,playType:oe.CreatePrivate,gameType:r,sessionId:this.account.sessionId,noobLobby:!1,map:a}))});return{ok:!0,region:c.region,subdomain:c.subdomain,id:c.id,private:c.private,raw:c}}async join(e,t){if(this.state.name=e||"yolkbot",typeof t==="string"){if(t.includes("#"))t=t.split("#")[1];let r=await this.initSession();if(!r.ok)return r;if(await new Promise((o)=>{let c=(u)=>{if(u.command==="gameFound")this.matchmakerListeners.splice(this.matchmakerListeners.indexOf(c),1),this.game.raw=u,this.game.code=u.id,this.game.region=u.region,o(u.id);if(u.error&&u.error==="gameNotFound")return l(Y.GameNotFound)};this.matchmakerListeners.push(c),this.matchmaker.send(JSON.stringify({command:"joinGame",id:t,observe:!1,sessionId:this.account.sessionId}))})==="gameNotFound")return l(Y.GameNotFound);if(!this.game.raw.id)return console.error("join: invalid game data received from matchmaker:",this.game.raw),l(Y.InternalError)}if(typeof t==="object"){if(!t.id||!t.subdomain||!t.uuid||!t.region)return l(Y.InvalidObject);if(this.account.id===0){let r=await this.loginAnonymously();if(!r.ok)return r}this.game.raw=t,this.game.code=this.game.raw.id,this.game.region=this.game.raw.region}let n=this.game.raw.host||(this.instance.startsWith("localhost:")?this.instance:`${this.game.raw.subdomain}.${this.instance}`);if(this.game.socket=new ne(`${this.protocol}://${n}/game/${this.game.raw.id}`,this.proxy),this.game.socket.binaryType="arraybuffer",this.game.socket.connectionTimeout=this.connectionTimeout,this.game.socket.onBeforeConnect=()=>{this.game.socket.onmessage=(r)=>this.processPacket(r.data),this.game.socket.onclose=(r)=>{if(this.state?.inGame)this.$emit("close",r.code),this.leave(-1)}},!await this.game.socket.tryConnect())return l(Y.WebSocketConnectFail);return{ok:!0}}#a(){if(Object.entries(this.me.position).map((t)=>Math.floor(t[1])).join(",")===this.pathing.activePath[this.pathing.activePath.length-1].positionStr)this.pathing.followingPath=!1,this.pathing.activePath=null,this.pathing.activeNode=null,this.pathing.activeNodeIdx=0,this.dispatch(new X(0));else{let t;if(this.pathing.activeNodeIdx<this.pathing.activePath.length-1)t=this.pathing.activePath[this.pathing.activeNodeIdx+1].flatCenter(),this.dispatch(new J(t));else t=this.pathing.activePath[this.pathing.activeNodeIdx].flatCenter(),this.dispatch(new J(t));for(let n of this.pathing.activePath)if(n.flatRadialDistance(this.me.position)<0.1&&n.position.y===Math.floor(this.me.position.y)){if(this.pathing.activePath.indexOf(n)>=this.pathing.activeNodeIdx){this.pathing.activeNodeIdx=this.pathing.activePath.indexOf(n)+1,this.pathing.activeNode=this.pathing.activePath[this.pathing.activeNodeIdx];break}}if(!(this.state.controlKeys&O.Forward))this.dispatch(new X(O.Forward))}}update(){if(this.hasQuit)return;if(this.pathing.followingPath&&this.intents.includes(h.PATHFINDING))this.#a();for(let n=0;n<this.#e.length;n++){let i=this.#e[n];if(i.check(this))i.execute(this),this.#e.splice(n,1)}if(this.state.chatLines=Math.max(0,this.state.chatLines-0.008333333333333333),this.me.playing){let n=this.state.stateIdx;if(this.intents.includes(h.DEBUG_BUFFER))console.log("setting buffer for idx",n),console.log("checking...shotsFired",this.state.shotsFired);if(this.me.jumping=!!(this.state.controlKeys&O.Jump),this.state.buffer[n]={controlKeys:this.state.controlKeys,yaw:this.state.yaw,pitch:this.state.pitch,shotsFired:this.state.shotsFired},this.state.shotsFired=0,this.lastUpdateTick>=2){this.$emit("tick");let i=new g;i.packInt8(p.syncMe),i.packInt8(this.state.stateIdx),i.packInt8(this.state.serverStateIdx);let r=ct(this.state.stateIdx-H+1,ee);for(let a=0;a<H;a++){let o=ct(r+a,ee),c=this.state.buffer[o]||{},u=c.controlKeys||0,m=c.shotsFired||0,k=c.yaw??this.state.yaw,d=c.pitch??this.state.pitch;if(this.intents.includes(h.DEBUG_BUFFER))console.log("going with",this.state.stateIdx,r,o,c);i.packInt8(u),i.packInt8(m),i.packString(Xt(k,d)),i.packInt8(100)}i.send(this.game.socket),this.state.buffer=[],this.lastUpdateTick=0}else this.lastUpdateTick++;this.state.stateIdx=ct(this.state.stateIdx+1,ee)}if(!this.intents.includes(h.PLAYER_HEALTH))return;let e=0.1*(this.game.isPrivate?this.game.options.healthRegen:1),t=Object.values(this.players);for(let n=0;n<t.length;n++){let i=t[n];if(i.playing&&i.hp>0){let r=i.streakRewards.includes(x.OverHeal);i.hp+=r?-e:e,i.hp=r?Math.max(100,i.hp):Math.min(100,i.hp)}if(i.spawnShield>0)i.spawnShield-=6}}on(e,t){if(Object.keys(this.#t).includes(e))this.#t[e].push(t);else this.#t[e]=[t]}onAny(e){this.#s.push(e)}off(e,t){if(t)this.#t[e]=this.#t[e].filter((n)=>n!==t);else this.#t[e]=[]}$emit(e,...t){if(this.hasQuit)return;if(this.#t[e])for(let n of this.#t[e])n(...t);for(let n of this.#s)n(e,...t)}emit(e,...t){let n=Zt[e];if(n)this.dispatch(new n(...t),!0);else throw Error(`no event found for "${e}"`)}updateGameOptions(){let e=new g;e.packInt8(p.gameOptions),e.packInt8(this.game.options.gravity*4),e.packInt8(this.game.options.damage*4),e.packInt8(this.game.options.healthRegen*4);let t=(this.game.options.locked?1:0)|(this.game.options.noTeamChange?2:0)|(this.game.options.noTeamShuffle?4:0);e.packInt8(t),this.game.options.weaponsDisabled.forEach((n)=>e.packInt8(n?1:0)),e.send(this.game.socket)}packetHandlers={[p.syncThem]:On.bind(null,this),[p.fire]:cn.bind(null,this),[p.hitThem]:dn.bind(null,this),[p.syncMe]:Nn.bind(null,this),[p.hitMe]:fn.bind(null,this),[p.swapWeapon]:En.bind(null,this),[p.collectItem]:nn.bind(null,this),[p.respawn]:Sn.bind(null,this),[p.die]:sn.bind(null,this),[p.pause]:yn.bind(null,this),[p.chat]:tn.bind(null,this),[p.addPlayer]:jt.bind(null,this),[p.removePlayer]:wn.bind(null,this),[p.eventModifier]:an.bind(null,this),[p.metaGameState]:kn.bind(null,this),[p.beginShellStreak]:Vt.bind(null,this),[p.endShellStreak]:rn.bind(null,this),[p.hitMeHardBoiled]:ln.bind(null,this),[p.gameOptions]:mn.bind(null,this),[p.ping]:Pn.bind(null,this),[p.switchTeam]:vn.bind(null,this),[p.changeCharacter]:en.bind(null,this),[p.reload]:In.bind(null,this),[p.explode]:on.bind(null,this),[p.throwGrenade]:Rn.bind(null,this),[p.spawnItem]:Tn.bind(null,this),[p.melee]:gn.bind(null,this),[p.updateBalance]:Fn.bind(null,this),[p.challengeCompleted]:bt.bind(null,this),[p.gameAction]:pn.bind(null,this),[p.socketReady]:Un.bind(null,this),[p.gameJoined]:un.bind(null,this),[p.playerInfo]:xn.bind(null,this),[p.respawnDenied]:()=>{this.me.playing=!1,this.$emit("respawnDenied")},[p.requestGameOptions]:()=>{this.game.isPrivate=!0,this.updateGameOptions()},[p.expireUpgrade]:()=>{},[p.clientReady]:()=>{},[p.musicInfo]:()=>s.unPackLongString()};processPacket(e){if(s.init(e),this.intents.includes(h.PACKET_HOOK))this.$emit("packet",e);let t=0,n=0;while(s.isMoreDataAvailable()){let i=s.unPackInt8U(),r=this.packetHandlers[i];if(r)r();else{if(console.error(`processPacket: got but couldn't identify: ${Object.keys(p).find((a)=>p[a]===i)} ${i}`),t)console.error(`processPacket: it may be a result of the ${t} command (${n}).`);break}if(t=Object.keys(p).find((a)=>p[a]===i),n=i,this.intents.includes(h.LOG_PACKETS))console.log(`[LOG_PACKETS] packet ${t}: ${n}`)}}async checkChiknWinner(){let e=await this.api.queryServices({cmd:"chicknWinnerReady",id:this.account.id,sessionId:this.account.sessionId});if(!e.ok)return e;return this.account.cw.limit=e.limit,this.account.cw.atLimit=e.limit>=4,this.account.cw.secondsUntilPlay=(this.account.cw.atLimit?e.period:e.span)||0,this.account.cw.canPlayAgain=Date.now()+this.account.cw.secondsUntilPlay*1000,{ok:!0,cw:this.account.cw}}async playChiknWinner(e=!0){if(this.account.cw.atLimit||this.account.cw.limit>Te)return l(G.HitDailyLimit);if(this.account.cw.canPlayAgain>Date.now()&&e)return l(G.OnCooldown);let t=await this.api.queryServices({cmd:"incentivizedVideoReward",firebaseId:this.account.firebaseId,id:this.account.id,sessionId:this.account.sessionId,token:null});if(!t.ok)return t;if(t.error){if(t.error==="RATELIMITED"||t.error==="RATELMITED")return await this.checkChiknWinner(),l(G.OnCooldown);else if(t.error==="SESSION_EXPIRED")return this.$emit("sessionExpired"),l(G.SessionExpired);return console.error("unknown Chikn Winner response, report this on Github:",t),l(G.InternalError)}if(t.reward)return this.account.eggBalance+=t.reward.eggsGiven,t.reward.itemIds.forEach((n)=>this.account.ownedItemIds.push(n)),await this.checkChiknWinner(),{ok:!0,...t.reward};return console.error("unknown Chikn Winner response, report this on Github:",t),l(G.InternalError)}async resetChiknWinner(){if(this.account.eggBalance<200)return l(G.NotEnoughResetEggs);if(!this.account.cw.atLimit)return l(G.NotAtDailyLimit);let e=await this.api.queryServices({cmd:"chwReset",sessionId:this.account.sessionId});if(!e.ok)return e;if(e.result!=="SUCCESS")return console.error("unknown Chikn Winner reset response, report this on Github:",e),l(G.InternalError);return this.account.eggBalance-=200,await this.checkChiknWinner(),{ok:!0,cw:this.account.cw}}canSee(e){if(!this.intents.includes(h.PATHFINDING))throw Error("canSee: you need enable the PATHFINDING intent");return this.pathing.nodeList.hasLineOfSight(this.me.position,e.position)}async refreshChallenges(){let e=await this.api.queryServices({cmd:"challengeGetDaily",sessionId:this.account.sessionId,playerId:this.account.id});if(!e.ok)return e;return this.#i(e),{ok:!0,challenges:this.account.challenges}}async rerollChallenge(e){let t=await this.api.queryServices({cmd:"challengeRerollSlot",sessionId:this.account.sessionId,slotId:e});if(!t.ok)return t;if(t["0"])return this.#i(Object.values(t)),{ok:!0,challenges:this.account.challenges};if(Object.values($e).includes(t.error))return{ok:!1,error:t.error};return console.error("rerollChallenge: unknown error response",t),{ok:!1,error:$e.InternalError}}async claimChallenge(e){let t=await this.api.queryServices({cmd:"challengeClaimReward",sessionId:this.account.sessionId,slotId:e});if(!t.ok)return t;if(t.reward){if(this.#i(t.challenges),t.reward>0)this.account.eggBalance+=t.reward;return{ok:!0,eggReward:t.reward,updatedChallenges:this.account.challenges}}if(Object.values(Ge).includes(t.error))return{ok:!1,error:t.error};return console.error("claimChallenge: unknown error response",t),{ok:!1,error:Ge.InternalError}}async refreshBalance(){let e=await this.api.queryServices({cmd:"checkBalance",firebaseId:this.account.firebaseId,sessionId:this.account.sessionId});if(!e.ok)return e;return this.account.eggBalance=e.currentBalance,{ok:!0,currentBalance:e.currentBalance}}async redeemCode(e){let t=await this.api.queryServices({cmd:"redeem",firebaseId:this.account.firebaseId,sessionId:this.account.sessionId,id:this.account.id,code:e});if(!t.ok)return t;if(t.result==="SUCCESS")return this.account.eggBalance=t.eggs_given,t.item_ids.forEach((i)=>this.account.ownedItemIds.push(i)),{ok:!0,eggsGiven:t.eggs_given,itemIds:t.item_ids};if(Object.values(Me).includes(t.result))return{ok:!1,error:t.result};return console.error("redeemCode: unknown error response",t),{ok:!1,error:Me.InternalError}}async claimURLReward(e){let t=await this.api.queryServices({cmd:"urlRewardParams",firebaseId:this.account.firebaseId,sessionId:this.account.sessionId,reward:e});if(!t.ok)return t;if(t.result==="SUCCESS")return this.account.eggBalance+=t.eggsGiven,t.itemIds.forEach((i)=>this.account.ownedItemIds.push(i)),{ok:!0,rewards:{eggs:t.eggsGiven,items:t.itemIds}};if(Object.values(Ae).includes(t.result))return{ok:!1,error:t.result};return console.error("claimURLReward: unknown error response",t),{ok:!1,error:Ae.InternalError}}async claimSocialReward(e){let t=await this.api.queryServices({cmd:"reward",firebaseId:this.account.firebaseId,sessionId:this.account.sessionId,rewardTag:e});if(!t.ok)return t;if(t.result==="SUCCESS")return this.account.eggBalance+=t.eggsGiven,t.itemIds.forEach((i)=>this.account.ownedItemIds.push(i)),{ok:!0,rewards:{eggs:t.eggsGiven,items:t.itemIds}};if(Object.values(ze).includes(t.result))return{ok:!1,error:t.result};return console.error("claimSocialReward: unknown error response",t),{ok:!1,error:ze.InternalError}}async buyItem(e){let t=await this.api.queryServices({cmd:"buy",firebaseId:this.account.firebaseId,sessionId:this.account.sessionId,itemId:e,save:!0});if(!t.ok)return t;if(t.result==="SUCCESS")return this.account.eggBalance=t.currentBalance,this.account.ownedItemIds.push(t.itemId),{ok:!0,itemId:t.itemId,currentBalance:t.currentBalance};if(Object.values(Ee).includes(t.result))return{ok:!1,error:t.result};return console.error("buyItem: unknown error response",t),{ok:!1,error:Ee.InternalError}}leave(e=xt.mainMenu){if(this.hasQuit)return;if(this.state.inGame=!1,e>-1)this.game?.socket?.close(e),this.$emit("leave",e);clearInterval(this.updateIntervalId),this.#e=[],this.state.chatLines=0,this.state.reloading=!1,this.state.swappingGun=!1,this.state.usingMelee=!1,this.state.stateIdx=0,this.state.serverStateIdx=0,this.state.shotsFired=0,this.state.buffer=[],this.players={},this.me=new se({}),this.game=this.#r,this.ping=0,this.lastPingTime=-1,this.lastDeathTime=-1,this.lastUpdateTick=0,this.pathing={nodeList:null,followingPath:!1,activePath:null,activeNode:null,activeNodeIdx:0}}logout(){if(this.account=this.#n,this.intents.includes(h.RENEW_SESSION))clearInterval(this.renewSessionInterval)}quit(e=!1){if(this.hasQuit)return;if(this.leave(),this.matchmaker){if(this.matchmaker.close(),!e)delete this.matchmaker}if(this.intents.includes(h.NO_AFK_KICK))clearInterval(this.afkKickInterval);if(this.intents.includes(h.RENEW_SESSION))clearInterval(this.renewSessionInterval);if(!e)delete this.account,delete this.api,delete this.game,delete this.me,delete this.pathing,delete this.players,delete this.state,delete this.packetHandlers,this.#n={},this.#r={},this.#t={},this.#s=[],this.#e=[];this.hasQuit=!0}}var Hi={API:ce,Bot:pt,GamePlayer:pe,Dispatches:Yt,Comm:{CommIn:s,CommOut:g},Constants:Re,Guns:Se,Maps:V};window.yolkbot=Hi;if(window.onYolkReady&&typeof window.onYolkReady==="function")console.warn("window.onYolkReady is no longer required as of yolkbot 1.3.0. You don't have to put your code inside it anymore."),window.onYolkReady();
